============================= test session starts ==============================
platform darwin -- Python 3.12.9, pytest-8.4.2, pluggy-1.6.0 -- /Users/swong/miniconda/bin/python3
cachedir: .pytest_cache
benchmark: 5.1.0 (defaults: timer=time.perf_counter disable_gc=False min_rounds=5 min_time=0.000005 max_time=1.0 calibration_precision=10 warmup=False warmup_iterations=100000)
rootdir: /Users/swong/dev/high-speed-camera-testing
configfile: pyproject.toml
plugins: libtmux-0.39.0, docker-3.1.2, xdist-3.8.0, anyio-4.10.0, benchmark-5.1.0, mock-3.14.0, asyncio-1.0.0, logfire-4.8.0, langsmith-0.3.12, cov-7.0.0
asyncio: mode=Mode.STRICT, asyncio_default_fixture_loop_scope=None, asyncio_default_test_loop_scope=function
collecting ... collected 85 items

tests/contract/test_camera_device_contract.py::TestCameraDeviceContract::test_enumerate_returns_list PASSED [  1%]
tests/contract/test_camera_device_contract.py::TestCameraDeviceContract::test_enumerate_no_cameras PASSED [  2%]
tests/contract/test_camera_device_contract.py::TestCameraDeviceContract::test_camera_lifecycle PASSED [  3%]
tests/contract/test_camera_device_contract.py::TestCameraDeviceContract::test_camera_cleanup_on_error PASSED [  4%]
tests/contract/test_camera_device_contract.py::TestCameraDeviceContract::test_single_access_enforcement PASSED [  5%]
tests/contract/test_camera_device_contract.py::TestCameraDeviceContract::test_capability_requires_init PASSED [  7%]
tests/contract/test_camera_device_contract.py::TestCameraDeviceContract::test_capture_requires_init PASSED [  8%]
tests/contract/test_camera_device_contract.py::TestCameraDeviceContract::test_frame_format_color PASSED [  9%]
tests/contract/test_camera_device_contract.py::TestCameraDeviceContract::test_frame_format_mono PASSED [ 10%]
tests/contract/test_camera_device_contract.py::TestCameraDeviceContract::test_native_resolution PASSED [ 11%]
tests/contract/test_gradio_ui_contract.py::TestGradioAppLaunchContract::test_launch_enforces_localhost PASSED [ 12%]
tests/contract/test_gradio_ui_contract.py::TestGradioAppLaunchContract::test_launch_enforces_no_sharing PASSED [ 14%]
tests/contract/test_gradio_ui_contract.py::TestGradioInterfaceContract::test_interface_loads_automatically PASSED [ 15%]
tests/contract/test_gradio_ui_contract.py::TestGradioInterfaceContract::test_interface_continuous_update PASSED [ 16%]
tests/contract/test_gradio_ui_contract.py::TestGradioInterfaceContract::test_session_start_callback PASSED [ 17%]
tests/contract/test_gradio_ui_contract.py::TestGradioInterfaceContract::test_session_end_callback PASSED [ 18%]
tests/contract/test_gradio_ui_contract.py::TestErrorDisplayContract::test_error_display_no_camera PASSED [ 20%]
tests/contract/test_gradio_ui_contract.py::TestErrorDisplayContract::test_error_display_in_use PASSED [ 21%]
tests/contract/test_gradio_ui_contract.py::TestErrorDisplayContract::test_error_display_connection_lost PASSED [ 22%]
tests/contract/test_gradio_ui_contract.py::TestSecurityContract::test_localhost_only_access PASSED [ 23%]
tests/contract/test_gradio_ui_contract.py::TestSecurityContract::test_external_ip_blocked PASSED [ 24%]
tests/contract/test_gradio_ui_contract.py::TestBrowserCompatibilityContract::test_browser_compatibility PASSED [ 25%]
tests/contract/test_gradio_ui_contract.py::TestInterfaceCreationContract::test_create_interface_binds_callbacks PASSED [ 27%]
tests/contract/test_gradio_ui_contract.py::TestInterfaceCreationContract::test_create_interface_returns_interface_object PASSED [ 28%]
tests/contract/test_gradio_ui_contract.py::TestFrameGeneratorContract::test_frame_generator_yields_numpy_arrays PASSED [ 29%]
tests/contract/test_gradio_ui_contract.py::TestFrameGeneratorContract::test_frame_generator_callable_returns_iterator PASSED [ 30%]
tests/contract/test_video_frame_contract.py::TestVideoFrameContract::test_frame_immutable PASSED [ 31%]
tests/contract/test_video_frame_contract.py::TestVideoFrameContract::test_frame_color_shape PASSED [ 32%]
tests/contract/test_video_frame_contract.py::TestVideoFrameContract::test_frame_mono_shape PASSED [ 34%]
tests/contract/test_video_frame_contract.py::TestVideoFrameContract::test_frame_dtype PASSED [ 35%]
tests/contract/test_video_frame_contract.py::TestVideoFrameContract::test_frame_validates_shape_mismatch PASSED [ 36%]
tests/contract/test_video_frame_contract.py::TestVideoFrameContract::test_frame_validates_channels PASSED [ 37%]
tests/contract/test_video_frame_contract.py::TestVideoFrameContract::test_frame_validates_dimensions PASSED [ 38%]
tests/contract/test_video_frame_contract.py::TestVideoFrameContract::test_frame_validates_timestamp PASSED [ 40%]
tests/contract/test_video_frame_contract.py::TestVideoFrameContract::test_frame_validates_sequence PASSED [ 41%]
tests/contract/test_video_frame_contract.py::TestVideoFrameContract::test_is_color_property PASSED [ 42%]
tests/contract/test_video_frame_contract.py::TestVideoFrameContract::test_size_bytes_property PASSED [ 43%]
tests/contract/test_video_frame_contract.py::TestVideoFrameContract::test_to_gradio_format_color PASSED [ 44%]
tests/contract/test_video_frame_contract.py::TestVideoFrameContract::test_to_gradio_format_mono PASSED [ 45%]
tests/contract/test_video_frame_contract.py::TestVideoFrameContract::test_to_gradio_format_no_copy PASSED [ 47%]
tests/contract/test_viewer_session_contract.py::TestViewerSessionContract::test_single_session_only PASSED [ 48%]
tests/contract/test_viewer_session_contract.py::TestViewerSessionContract::test_session_idempotent_start PASSED [ 49%]
tests/contract/test_viewer_session_contract.py::TestViewerSessionContract::test_session_end_releases PASSED [ 50%]
tests/contract/test_viewer_session_contract.py::TestViewerSessionContract::test_session_end_idempotent PASSED [ 51%]
tests/contract/test_viewer_session_contract.py::TestViewerSessionContract::test_active_session_info PASSED [ 52%]
tests/contract/test_viewer_session_contract.py::TestViewerSessionContract::test_no_active_session PASSED [ 54%]
tests/contract/test_viewer_session_contract.py::TestViewerSessionContract::test_is_session_active_true PASSED [ 55%]
tests/contract/test_viewer_session_contract.py::TestViewerSessionContract::test_is_session_active_false PASSED [ 56%]
tests/contract/test_viewer_session_contract.py::TestViewerSessionContract::test_thread_safety_concurrent_sessions PASSED [ 57%]
tests/contract/test_viewer_session_contract.py::TestStreamStateContract::test_streaming_requires_session PASSED [ 58%]
tests/contract/test_viewer_session_contract.py::TestStreamStateContract::test_streaming_state_toggle PASSED [ 60%]
tests/contract/test_viewer_session_contract.py::TestStreamStateContract::test_frame_count_increments PASSED [ 61%]
tests/contract/test_viewer_session_contract.py::TestStreamStateContract::test_error_count_threshold PASSED [ 62%]
tests/contract/test_viewer_session_contract.py::TestStreamStateContract::test_error_count_reset PASSED [ 63%]
tests/contract/test_viewer_session_contract.py::TestStreamStateContract::test_thread_safety_frame_count PASSED [ 64%]
tests/integration/test_scenario_01_success.py::test_camera_feed_displays PASSED [ 65%]
tests/integration/test_scenario_01_success.py::test_camera_feed_color_and_mono_support PASSED [ 67%]
tests/integration/test_scenario_02_single_viewer.py::test_second_viewer_blocked PASSED [ 68%]
tests/integration/test_scenario_02_single_viewer.py::test_first_viewer_can_reconnect PASSED [ 69%]
tests/integration/test_scenario_02_single_viewer.py::test_session_cleanup_allows_new_connections PASSED [ 70%]
tests/integration/test_scenario_03_no_camera.py::test_no_camera_shows_error PASSED [ 71%]
tests/integration/test_scenario_03_no_camera.py::test_error_message_is_user_friendly PASSED [ 72%]
tests/integration/test_scenario_04_cleanup.py::test_camera_cleanup_on_disconnect PASSED [ 74%]
tests/integration/test_scenario_04_cleanup.py::test_camera_can_be_reinitialized_after_cleanup PASSED [ 75%]
tests/integration/test_scenario_05_localhost.py::test_localhost_enforcement PASSED [ 76%]
tests/integration/test_scenario_05_localhost.py::test_share_disabled PASSED [ 77%]
tests/integration/test_scenario_05_localhost.py::test_default_localhost_settings PASSED [ 78%]
tests/unit/test_capture.py::test_frame_generator_yields_frames PASSED    [ 80%]
tests/unit/test_capture.py::test_frame_generator_handles_timeout PASSED  [ 81%]
tests/unit/test_capture.py::test_frame_generator_propagates_fatal_errors PASSED [ 82%]
tests/unit/test_capture.py::test_frame_generator_sequence_numbering PASSED [ 83%]
tests/unit/test_errors.py::test_no_device_found_message PASSED           [ 84%]
tests/unit/test_errors.py::test_device_lost_message PASSED               [ 85%]
tests/unit/test_errors.py::test_access_denied_message PASSED             [ 87%]
tests/unit/test_errors.py::test_timeout_message PASSED                   [ 88%]
tests/unit/test_errors.py::test_network_send_error_message PASSED        [ 89%]
tests/unit/test_errors.py::test_unknown_error_code PASSED                [ 90%]
tests/unit/test_errors.py::test_default_message_when_not_specified PASSED [ 91%]
tests/unit/test_errors.py::test_all_mapped_errors_are_friendly PASSED    [ 92%]
tests/unit/test_errors.py::test_messages_provide_actionable_guidance PASSED [ 94%]
tests/unit/test_init.py::test_initialize_camera_success PASSED           [ 95%]
tests/unit/test_init.py::test_initialize_camera_no_cameras PASSED        [ 96%]
tests/unit/test_init.py::test_initialize_camera_init_failure PASSED      [ 97%]
tests/unit/test_init.py::test_initialize_camera_access_denied PASSED     [ 98%]
tests/unit/test_init.py::test_initialize_camera_logs_info PASSED         [100%]

=============================== warnings summary ===============================
../../miniconda/lib/python3.12/site-packages/websockets/legacy/__init__.py:6
  DeprecationWarning: websockets.legacy is deprecated; see https://websockets.readthedocs.io/en/stable/howto/upgrade.html for upgrade instructions

-- Docs: https://docs.pytest.org/en/stable/how-to/capture-warnings.html
======================== 85 passed, 1 warning in 14.53s ========================
